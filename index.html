<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Restaurant AI Helper — Texas Dining</title>
  <meta name="description" content="Turn your restaurant site into a 24/7 host. Answer hours, menu, and dietary questions instantly—no extra staff."/>
  <meta name="theme-color" content="#0B0F19"/>
  <link rel="icon" href="/favicon.ico"/>
  <!-- Live API base (Render) -->
  <meta name="rai-api" content="https://restaurant-ai-landing.onrender.com"/>

  <!-- Fonts + Tailwind -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{ --accent:#FF7A00; --charcoal:#222; }
    html,body{height:100%}
    body{ font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial; color:var(--charcoal); line-height:1.6 }
    h1,h2,.section-title{ font-family:Poppins, Inter, system-ui; letter-spacing:-.02em }
    .container{max-width:1200px}
    .btn-accent{background:var(--accent);color:#fff}
    .btn-accent:hover{filter:brightness(.95)}
    .btn-outline-accent{border:1px solid var(--accent);color:var(--accent)}
    .btn-outline-accent:hover{background:rgba(255,122,0,.08)}
    .chip{border:1px solid #e5e7eb;border-radius:.5rem;padding:.3rem .55rem;font-size:.82rem}
    .card{transition:transform .18s ease, box-shadow .18s ease}
    .card:hover{transform:translateY(-2px); box-shadow:0 6px 18px rgba(0,0,0,.08)}
    .focus-ring:focus{outline:3px solid rgba(255,122,0,.45); outline-offset:2px}
    .img-ph{background:#f3f4f6}
    /* Sticky chat */
    #chatPane{position:fixed; right:20px; bottom:20px; width:360px; max-height:70vh; background:#fff; border:1px solid #e5e7eb; border-radius:14px; overflow:hidden; z-index:60; display:none}
    #chatBackdrop{position:fixed; inset:0; background:rgba(0,0,0,.45); backdrop-filter:saturate(100%) blur(1px); z-index:50; display:none}
    @media (max-width: 768px){
      #chatPane{left:0; right:0; bottom:0; width:auto; max-height:75vh; border-radius:14px 14px 0 0}
    }
    /* Left rail + grid */
    #browseWrap{display:grid; grid-template-columns:280px 1fr; gap:24px}
    @media (max-width: 1024px){ #browseWrap{grid-template-columns:1fr} }
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
  </style>
</head>
<body class="bg-white">

  <!-- Header -->
  <header class="sticky top-0 z-40 bg-white/90 backdrop-blur border-b" role="banner">
    <div class="container mx-auto px-4 py-3 flex items-center justify-between">
      <a href="#/" class="flex items-center gap-3 focus-ring">
        <div class="h-8 w-8 rounded-md bg-neutral-900" aria-hidden="true"></div>
        <span class="font-semibold tracking-tight">Restaurant AI Helper</span>
      </a>
      <nav class="hidden md:flex items-center gap-8 text-sm" aria-label="Primary">
        <a href="#/discover" class="hover:opacity-70">Browse</a>
        <a href="#how-it-works" class="hover:opacity-70">How it works</a>
        <a href="#why-it-works" class="hover:opacity-70">Why it works</a>
        <a href="#pricing" class="hover:opacity-70">Pricing</a>
        <a href="#faq-trust" class="hover:opacity-70">FAQ</a>
      </nav>
      <div class="hidden md:flex items-center gap-3">
        <button id="openChat" class="rounded-md px-4 py-2 btn-accent text-sm focus-ring" aria-controls="chatPane" aria-expanded="false">Try Live Demo</button>
      </div>
      <button id="hamburger" class="md:hidden border rounded p-2 focus-ring" aria-controls="mobileMenu" aria-expanded="false" aria-label="Menu">
        <svg width="22" height="22" viewBox="0 0 24 24" fill="none"><path d="M4 6h16M4 12h16M4 18h16" stroke="#111" stroke-width="2" stroke-linecap="round"/></svg>
      </button>
    </div>
    <div id="mobileMenu" class="md:hidden border-t bg-white hidden" aria-expanded="false">
      <div class="container mx-auto px-4 py-3 grid gap-2 text-sm">
        <a href="#/discover" class="py-2">Browse</a>
        <a href="#how-it-works" class="py-2">How it works</a>
        <a href="#why-it-works" class="py-2">Why it works</a>
        <a href="#pricing" class="py-2">Pricing</a>
        <a href="#faq-trust" class="py-2">FAQ</a>
        <button id="openChatM" class="mt-2 rounded-md px-4 py-2 btn-accent text-sm">Try Live Demo</button>
      </div>
    </div>
  </header>

  <main id="content" role="main">
    <!-- Hero -->
    <section id="hero" class="bg-neutral-950 text-white">
      <div class="container mx-auto px-4 py-12 md:py-16 grid md:grid-cols-2 gap-10 items-center">
        <div>
          <h1 class="text-[clamp(28px,4vw,40px)] section-title leading-tight">Turn your restaurant site into a 24/7 host.</h1>
          <p class="mt-3 text-neutral-300 text-lg">Answer hours, menu, and dietary questions instantly—no extra staff.</p>
          <div class="mt-6 flex flex-wrap gap-3">
            <button id="ctaDemo" class="rounded-md px-5 py-3 btn-accent font-medium focus-ring">Try Live Demo</button>
            <a href="#pricing" class="rounded-md px-5 py-3 btn-outline-accent font-medium focus-ring" id="ctaPricing">See Pricing</a>
          </div>
        </div>
        <!-- Replaced any placeholders with clean brand panel -->
        <div class="rounded-lg p-6 border border-white/15 bg-white/5">
          <div class="text-neutral-200 text-sm">Live assistant demo is available at the bottom-right. Real responses from your API.</div>
          <div class="mt-4 grid grid-cols-4 gap-3 opacity-80">
            <div class="h-8 bg-white/10 rounded"></div>
            <div class="h-8 bg-white/10 rounded"></div>
            <div class="h-8 bg-white/10 rounded"></div>
            <div class="h-8 bg-white/10 rounded"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Why it works (no chart placeholder) -->
    <section id="why-it-works" class="bg-neutral-50 border-y">
      <div class="container mx-auto px-4 py-12 md:py-16 grid md:grid-cols-2 gap-10 items-center">
        <div>
          <h2 class="text-2xl md:text-3xl section-title">Why restaurants use it</h2>
          <ul class="mt-4 space-y-3 text-sm">
            <li class="flex items-start gap-3"><span class="mt-1 inline-block h-5 w-5 rounded bg-emerald-600"></span> Deflect repetitive calls during peak hours</li>
            <li class="flex items-start gap-3"><span class="mt-1 inline-block h-5 w-5 rounded bg-emerald-600"></span> On-brand menu guidance with safe allergy wording</li>
            <li class="flex items-start gap-3"><span class="mt-1 inline-block h-5 w-5 rounded bg-emerald-600"></span> Simple one-line install and analytics</li>
          </ul>
        </div>
        <div class="grid gap-4">
          <figure class="border rounded-lg p-4 bg-white">
            <blockquote class="text-neutral-800 text-sm">“Guests get instant answers. Our team gets time back.”</blockquote>
            <figcaption class="text-xs text-neutral-500 mt-2">Owner, Austin Bistro</figcaption>
          </figure>
          <figure class="border rounded-lg p-4 bg-white">
            <blockquote class="text-neutral-800 text-sm">“On-brand replies and fewer phone calls during the rush.”</blockquote>
            <figcaption class="text-xs text-neutral-500 mt-2">GM, Dallas Steakhouse</figcaption>
          </figure>
        </div>
      </div>
    </section>

    <!-- Featured restaurants (6 card grid) -->
    <section id="featured" class="container mx-auto px-4 py-12 md:py-16">
      <div class="flex items-center justify-between">
        <h2 class="text-2xl section-title">Featured in Texas</h2>
        <div class="text-sm text-neutral-600" id="countInfo"></div>
      </div>
      <div id="cardGrid" class="mt-6 grid gap-5 sm:grid-cols-2 lg:grid-cols-3"></div>
    </section>

    <!-- Pricing with credibility line -->
    <section id="pricing" class="container mx-auto px-4 py-12 md:py-16">
      <h2 class="text-2xl md:text-[24px] section-title">Pricing</h2>
      <p class="mt-2 text-neutral-600">Simple plans that scale with you. <span class="font-medium">Teams report ~10 hours saved per location each week.</span></p>
      <div class="mt-8 grid md:grid-cols-3 gap-6 items-stretch">
        <div class="border rounded-lg p-6 flex flex-col">
          <div class="text-xl font-semibold">Starter</div>
          <div class="mt-2 text-3xl font-extrabold">$49<span class="text-base font-normal text-neutral-500">/mo</span></div>
          <ul class="mt-4 text-sm space-y-2">
            <li>1 restaurant</li><li>Menu upload</li><li>Chat widget</li><li class="text-neutral-500">Analytics</li><li class="text-neutral-500">Custom branding</li>
          </ul>
          <button class="mt-6 rounded-md px-4 py-2 btn-outline-accent text-center focus-ring">Start Free Trial</button>
        </div>
        <div class="border-2 rounded-lg p-6 flex flex-col" style="border-color:var(--accent); box-shadow:0 8px 30px rgba(0,0,0,.08)">
          <div class="text-xl font-semibold flex items-center justify-between">
            <span>Pro</span><span class="text-xs px-2 py-1 rounded-full" style="background:rgba(255,122,0,.12);color:var(--accent)">Most Popular</span>
          </div>
          <div class="mt-2 text-3xl font-extrabold">$99<span class="text-base font-normal text-neutral-500">/mo</span></div>
          <ul class="mt-4 text-sm space-y-2">
            <li>Multi-location</li><li>Menu upload</li><li>Chat widget</li><li>Analytics</li><li>Custom branding</li>
          </ul>
          <button class="mt-6 rounded-md px-4 py-2 btn-accent text-center focus-ring">Book a Demo</button>
        </div>
        <div class="border rounded-lg p-6 flex flex-col">
          <div class="text-xl font-semibold">Enterprise</div>
          <div class="mt-2 text-3xl font-extrabold">Custom</div>
          <ul class="mt-4 text-sm space-y-2">
            <li>Dedicated support</li><li>Priority SLA</li><li>API integration</li><li>Custom SSO & roles</li><li>Advanced reporting</li>
          </ul>
          <button class="mt-6 rounded-md px-4 py-2 btn-outline-accent text-center focus-ring">Contact Sales</button>
        </div>
      </div>

      <!-- Credibility strip -->
      <div class="mt-10 grid md:grid-cols-2 gap-6">
        <div class="flex items-center gap-6 opacity-80">
          <div class="h-8 w-28 bg-neutral-200 rounded" title="Logo"></div>
          <div class="h-8 w-28 bg-neutral-200 rounded" title="Logo"></div>
          <div class="h-8 w-28 bg-neutral-200 rounded" title="Logo"></div>
          <div class="h-8 w-28 bg-neutral-200 rounded" title="Logo"></div>
        </div>
        <div class="grid gap-3">
          <blockquote class="text-sm text-neutral-800">“Setup took minutes and our phones quieted down.”</blockquote>
          <blockquote class="text-sm text-neutral-800">“Clear answers on parking and dietary options boosted bookings.”</blockquote>
        </div>
      </div>
    </section>

    <!-- FAQ -->
    <section id="faq-trust" class="bg-neutral-50 border-y">
      <div class="container mx-auto px-4 py-12 md:py-16">
        <h2 class="text-2xl md:text-[24px] section-title">Frequently Asked Questions</h2>
        <div class="mt-6 grid md:grid-cols-2 gap-6 text-sm">
          <details class="border rounded-lg p-5 bg-white" open>
            <summary class="font-medium cursor-pointer">Does this replace staff?</summary>
            <div class="mt-2 text-neutral-700">No—It handles repetitive questions and escalates anything sensitive to your team.</div>
          </details>
          <details class="border rounded-lg p-5 bg-white">
            <summary class="font-medium cursor-pointer">How do menus stay current?</summary>
            <div class="mt-2 text-neutral-700">Upload a file, paste a link, or use the admin page; daily specials and 86 toggles included.</div>
          </details>
          <details class="border rounded-lg p-5 bg-white">
            <summary class="font-medium cursor-pointer">Any changes to my POS?</summary>
            <div class="mt-2 text-neutral-700">None required. It works alongside your existing tools.</div>
          </details>
          <details class="border rounded-lg p-5 bg-white">
            <summary class="font-medium cursor-pointer">What about allergies?</summary>
            <div class="mt-2 text-neutral-700">Conservative language with staff escalation when unsure; severe allergies directed to speak with staff.</div>
          </details>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer with legal -->
  <footer class="border-t" role="contentinfo">
    <div class="container mx-auto px-4 py-8 text-sm text-neutral-600 grid md:grid-cols-2 gap-4">
      <div>&copy; <span id="year"></span> Restaurant AI Helper</div>
      <nav class="flex items-center gap-4 justify-start md:justify-end">
        <a href="#terms" class="hover:opacity-80">Terms</a>
        <a href="#privacy" class="hover:opacity-80">Privacy</a>
        <a href="mailto:contact@restaurantaihelper.com" class="hover:opacity-80">Contact</a>
      </nav>
    </div>
  </footer>

  <!-- Single sticky chat -->
  <div id="chatBackdrop" aria-hidden="true"></div>
  <section id="chatPane" aria-label="Live demo chat" aria-modal="true" role="dialog">
    <div class="px-4 py-3 border-b bg-neutral-50 flex items-center justify-between">
      <div class="font-semibold">Live demo — real responses</div>
      <button id="closeChat" class="rounded px-2 py-1 border text-sm focus-ring" aria-label="Close chat">Close</button>
    </div>
    <div id="chatLog" class="h-[380px] overflow-auto px-4 py-3 text-sm"></div>
    <div id="typing" class="px-4 pb-1 text-xs text-neutral-500" role="status" aria-live="polite" hidden>Assistant is typing…</div>
    <form id="chatForm" class="flex border-t">
      <input id="chatInput" class="flex-1 px-4 py-3 outline-none" placeholder="Ask about hours, gluten-free options, or parking." aria-label="Message"/>
      <button class="px-4 py-3 border-l bg-neutral-50 hover:bg-neutral-100 focus-ring" type="submit">Send</button>
    </form>
  </section>

  <!-- Data (The Back Porch + sample set) -->
  <script>
  const backPorch = {
    id: "back-porch-kilgore",
    name: "The Back Porch",
    city: "Kilgore",
    cuisines: ["American","Burgers"],
    price: "$",
    rating: 4.4,
    address: "904 Broadway Blvd, Kilgore, TX 75662",
    phone: "(903) 984-8141",
    hours: { Tue:"11:00–22:00", Wed:"11:00–22:00", Thu:"11:00–22:00", Fri:"11:00–23:00", Sat:"11:00–23:00", Sun:"11:00–21:00", Mon:"Closed" },
    dress: "Casual to smart-casual",
    parking: "On-site lot; additional nearby parking during events",
    about: "Relaxed, long-running spot serving hearty burgers, baskets, baked potatoes, and more — with live music on select nights.",
    url: "https://www.thebackporchkilgore.com/menu",
    images: [],
    coords: { lat: 32.389, lng: -94.874 },
    menu: [
      { category:"Appetizers", items:[
        { name:"Homemade Chips & Queso", price:7.99 },
        { name:"Hand Battered Onion Rings", price:7.99 },
        { name:"Fried Pickles", price:6.99 },
        { name:"Bacon-Wrapped Stuffed Jalapeño Peppers", price:10.99 },
        { name:"Potato Skins", price:9.99 }
      ]},
      { category:"Salads & Bowls", items:[
        { name:"Chef Salad", price:12.99 },
        { name:"Grilled Chicken Salad", price:11.99 },
        { name:"Hamburger Salad", price:10.99 },
        { name:"Vicki’s Sampler (pick any 3)", price:12.99 }
      ]},
      { category:"Baked Potatoes", items:[
        { name:"Plain Jane", price:7.99 },
        { name:"Fully Loaded", price:8.99 },
        { name:"Grilled Chicken Baked Potato", price:12.99 },
        { name:"Chicken Strip Baked Potato", price:12.99 },
        { name:"Burger Baked Potato", price:12.99 }
      ]},
      { category:"Gourmet Burgers", items:[
        { name:"Old-Fashioned Homemade Cheeseburger", price:11.99 },
        { name:"Bacon Cheeseburger", price:13.99 },
        { name:"Chili Cheese Burger", price:13.99 },
        { name:"Farmhouse Cheeseburger", price:14.99 },
        { name:"Cheeseburger Sliders (4)", price:12.99 },
        { name:"The Big Double (1 lb)", price:16.99 }
      ]},
      { category:"Sandwiches, Wraps & Melts", items:[
        { name:"BLT (Texas Toast)", price:10.99 },
        { name:"Chicken Fried Steak Sandwich", price:14.99 },
        { name:"Philly Cheesesteak", price:13.99 },
        { name:"Grilled Chicken Quesadilla", price:12.99 }
      ]},
      { category:"Dinners", items:[
        { name:"Chicken Strip Basket", price:10.99 },
        { name:"Cowboy Dinner", price:16.99 },
        { name:"Sirloin (6 oz)", price:19.99 },
        { name:"BP Mixer", price:29.99 },
        { name:"Chicken Fried Chicken Dinner", price:16.99 }
      ]},
      { category:"Sides", items:[
        { name:"Loaded Baked Potato (side)", price:3.99 }
      ]}
    ],
    reviews: [
      { author:"Recent diner", rating:5, text:"Great burgers and fast service, even on music nights.", ago:"1w" },
      { author:"Local regular", rating:4, text:"Perfect for groups; love the live music.", ago:"3w" }
    ]
  };

  const CITIES = ["Austin","Dallas","Houston","San Antonio","Fort Worth","Plano","Arlington","Irving","El Paso","Waco"];
  const CUISINES = [["Steakhouse"],["Seafood"],["Contemporary American"],["Mexican"],["Sushi"],["Barbecue"],["Vegan"],["American"]];
  const PRICES = ["$","$$","$$$","$$$$"];
  function rnd(a){ return a[Math.floor(Math.random()*a.length)] }
  function genRestaurant(i){
    const city=rnd(CITIES), cuisines=rnd(CUISINES), price=rnd(PRICES), rating=+(4+Math.random()*1).toFixed(1);
    return {
      id:`tx-rest-${i}`, name:`Sample ${cuisines[0]} ${i}`, city, cuisines, price, rating,
      address:`${100+i} Market St, ${city}, TX`, phone:"(555) 000-0000",
      hours:{Mon:"11:00–22:00",Tue:"11:00–22:00",Wed:"11:00–22:00",Thu:"11:00–22:00",Fri:"11:00–23:00",Sat:"10:00–23:00",Sun:"10:00–21:00"},
      dress:"Smart-casual", parking:"Street and garage",
      about:`Modern ${cuisines[0].toLowerCase()} spot with seasonal ingredients and craft beverages.`,
      url:"#", images:[], coords:{lat:30+Math.random()*5,lng:-97+Math.random()*5},
      menu:[
        {category:"Starters", items:[{name:"Seasonal Appetizer", price:12.00, desc:"Chef’s selection"}]},
        {category:"Mains", items:[{name:"Signature Dish", price:28.00, desc:"House specialty"}]},
        {category:"Desserts", items:[{name:"Classic Dessert", price:9.00, desc:"Sweet finish"}]}
      ],
      reviews:[
        {author:"Guest", rating:5, text:"Fantastic service and flavors.", ago:"2w"},
        {author:"Local", rating:4, text:"Great ambiance.", ago:"1m"}
      ]
    };
  }
  const PLACEHOLDERS = Array.from({length:12}, (_,i)=>genRestaurant(i+1)); // Only need a small set for featured
  let DATA = [backPorch, ...PLACEHOLDERS];
  </script>

  <!-- App logic -->
  <script>
  const API = document.querySelector('meta[name="rai-api"]')?.content || '';

  // Mobile menu
  (function(){
    const btn=document.getElementById('hamburger'); const menu=document.getElementById('mobileMenu');
    btn?.addEventListener('click', ()=>{ const open=menu.classList.contains('hidden'); menu.classList.toggle('hidden'); btn.setAttribute('aria-expanded', String(open)); menu.setAttribute('aria-expanded', String(open)); });
  })();

  // Sticky Chat (single) with typing dots + simple "stream"
  (function(){
    const pane=document.getElementById('chatPane'); const backdrop=document.getElementById('chatBackdrop');
    const openBtns=[document.getElementById('openChat'), document.getElementById('openChatM'), document.getElementById('ctaDemo')].filter(Boolean);
    const closeBtn=document.getElementById('closeChat');
    const form=document.getElementById('chatForm'); const input=document.getElementById('chatInput'); const log=document.getElementById('chatLog');
    const typing=document.getElementById('typing');

    function open(){ pane.style.display='block'; backdrop.style.display='block'; openBtns.forEach(b=>b?.setAttribute('aria-expanded','true')); input?.focus(); }
    function close(){ pane.style.display='none'; backdrop.style.display='none'; openBtns.forEach(b=>b?.setAttribute('aria-expanded','false')); }
    backdrop.addEventListener('click', close); closeBtn.addEventListener('click', close);
    openBtns.forEach(b=> b.addEventListener('click', open));
    document.getElementById('ctaPricing')?.addEventListener('click', ()=> document.getElementById('pricing')?.scrollIntoView({behavior:'smooth'}));

    function esc(s){return s.replace(/[&<>"']/g,m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;'}[m]))}
    function bubble(role, text=''){
      const row=document.createElement('div'); row.className='mb-2';
      row.innerHTML=role==='you'
        ? `<div class="text-right"><span class="inline-block rounded-md bg-neutral-900 text-white px-3 py-2">${esc(text)}</span></div>`
        : `<div class="text-left"><span class="inline-block rounded-md bg-neutral-100 px-3 py-2"><span class="stream"></span></span></div>`;
      log.appendChild(row); log.scrollTop=log.scrollHeight;
      return row.querySelector('.stream');
    }

    function typingDots(on){
      typing.hidden=!on;
      if (!on) return;
      let dots=0;
      const id=setInterval(()=>{
        if (typing.hidden) return clearInterval(id);
        dots=(dots+1)%4;
        typing.textContent='Assistant is typing' + '.'.repeat(dots);
      }, 300);
    }

    async function ask(q, context){
      if(!q.trim()) return;
      bubble('you', q);
      typingDots(true);
      let streamEl = bubble('ai','');

      try{
        const body = context ? {message:q, context} : {message:q};
        const r=await fetch(API+'/chat/query',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(body)});
        const j=await r.json();
        typingDots(false);
        // Simple client-side streaming: reveal characters gradually
        const txt = (j.reply || 'Sorry, something went wrong.').toString();
        let i=0; const step=() => {
          if (i<=txt.length){ streamEl.textContent = txt.slice(0,i); i+=2; log.scrollTop=log.scrollHeight; requestAnimationFrame(step); }
        }; step();
      }catch{
        typingDots(false);
        streamEl.textContent='Can’t reach the demo API right now.';
      }
    }

    form?.addEventListener('submit', e=>{ e.preventDefault(); const v=input.value; input.value=''; ask(v); });
    // Expose global to scope chat by restaurant
    window.askAbout = function(placeId){
      const r = (window.DATA||[]).find(x=>x.id===placeId);
      open();
      const q = `Tell me about ${r?.name||'this place'} — hours, parking, dress, and popular dishes.`;
      ask(q, { restaurantId: placeId });
    };
    // Seed welcome
    setTimeout(()=>{ const streamEl=bubble('ai',''); streamEl.textContent='Hi! Ask about hours, gluten-free options, or parking.'; }, 250);
  })();

  // Featured six cards
  (function(){
    const grid = document.getElementById('cardGrid');
    const featured = (window.DATA||[]).slice(0,6);
    function card(r){
      const cuisines = r.cuisines.join(', ');
      const facts = [
        r.parking ? `Parking: ${r.parking}` : null,
        r.dress ? `Dress: ${r.dress}` : null
      ].filter(Boolean).slice(0,2);
      return `
      <article class="card border rounded-lg overflow-hidden bg-white flex flex-col" data-id="${r.id}">
        <div class="h-44 img-ph" role="img" aria-label="Restaurant image"></div>
        <div class="p-4 flex-1 flex flex-col">
          <div class="flex items-start justify-between gap-2">
            <h3 class="font-semibold leading-tight">${r.name}</h3>
            <div class="flex items-center gap-1">
              <span class="chip">${r.price||'$'}</span>
              <span class="chip">${cuisines}</span>
            </div>
          </div>
          <div class="mt-1 text-xs text-neutral-500">${r.city}, TX • ${r.rating ? r.rating.toFixed(1):'—'}★</div>
          ${facts.length? `<ul class="mt-2 text-sm text-neutral-700 list-disc list-inside">${facts.map(f=>`<li>${f}</li>`).join('')}</ul>`:''}
          <div class="mt-3 flex flex-wrap gap-2">
            <button class="chip open-detail" data-id="${r.id}">View details</button>
            <a href="${r.url||'#'}" target="_blank" class="chip">Menu</a>
            <button class="chip ask-about" data-id="${r.id}" title="Ask about this place">Ask about this place</button>
          </div>
        </div>
      </article>`;
    }
    grid.innerHTML = featured.map(card).join('');
    grid.querySelectorAll('.ask-about').forEach(btn=> btn.onclick = () => window.askAbout(btn.getAttribute('data-id')));
    grid.querySelectorAll('.open-detail').forEach(btn=> btn.onclick = () => openDetail(btn.getAttribute('data-id')));

    // Detail drawer reused from below:
    window.openDetail = function(id){
      const r = (window.DATA||[]).find(x=>x.id===id); if(!r) return;
      const modal = document.getElementById('detailModal');
      document.getElementById('detailName').textContent = r.name;
      document.getElementById('detailMeta').textContent = `${r.city}, TX • ${r.cuisines.join(', ')} • ${r.price||'$'} • ${r.rating? r.rating.toFixed(1):'—'}★`;
      document.getElementById('detailGallery').textContent = 'Photo';
      document.getElementById('tab-overview').textContent = r.about || '';
      document.getElementById('infoAddress').textContent = r.address || '';
      document.getElementById('infoPhone').textContent = r.phone || '';
      document.getElementById('infoHours').innerHTML = r.hours ? Object.entries(r.hours).map(([d,h])=>`${d}: ${h}`).join('<br>') : '—';
      document.getElementById('infoDress').textContent = r.dress || '—';
      document.getElementById('infoParking').textContent = r.parking || '—';
      document.getElementById('infoUrl').innerHTML = r.url ? `<a class="underline" href="${r.url}" target="_blank">${r.url}</a>` : '—';
      const menuDiv = document.getElementById('menuContent');
      menuDiv.innerHTML = (r.menu||[]).map(cat=>{
        const items = cat.items.map(i=>`
          <div class="flex justify-between gap-3">
            <div><div class="font-medium">${i.name}</div>${i.desc?`<div class="text-xs text-neutral-500">${i.desc}</div>`:''}</div>
            <div class="price text-sm whitespace-nowrap">${(i.price!=null)?`$${Number(i.price).toFixed(2)}`:'—'}</div>
          </div>`).join('<div class="h-2"></div>');
        return `<div class="mb-4"><div class="font-semibold">${cat.category}</div><div class="mt-2 space-y-2">${items}</div></div>`;
      }).join('');
      const map = document.getElementById('detailMap');
      const q = r.address ? encodeURIComponent(r.address) : encodeURIComponent(`${r.city}, TX`);
      map.src = `https://www.google.com/maps?q=${q}&output=embed`;

      document.querySelectorAll('.tab-btn').forEach(b=> b.setAttribute('aria-selected','false'));
      document.querySelector('[data-tab="overview"]').setAttribute('aria-selected','true');
      document.getElementById('tab-overview').classList.remove('hidden');
      document.getElementById('tab-menu').classList.add('hidden');
      document.getElementById('tab-info').classList.add('hidden');
      document.getElementById('tab-reviews').classList.add('hidden');

      modal.classList.remove('hidden');
    }
  })();

  // Footer year
  document.getElementById('year').textContent = new Date().getFullYear();
  </script>

  <!-- Detail Drawer -->
  <div id="detailModal" class="fixed inset-0 z-50 hidden" aria-modal="true" role="dialog">
    <div class="absolute inset-0 bg-black/50"></div>
    <div class="absolute inset-0 flex items-end md:items-center md:justify-center">
      <div class="bg-white w-full md:max-w-4xl rounded-t-2xl md:rounded-2xl overflow-hidden">
        <div class="flex items-center justify-between px-4 py-3 border-b">
          <div>
            <div class="font-semibold text-lg" id="detailName">Restaurant</div>
            <div class="text-xs text-neutral-500" id="detailMeta">City • Cuisine • Price</div>
          </div>
          <button id="detailClose" class="text-neutral-500 hover:opacity-70" aria-label="Close">&times;</button>
        </div>
        <div class="grid md:grid-cols-2 gap-0">
          <div class="p-4 space-y-3">
            <div id="detailGallery" class="rounded bg-neutral-100 h-40 flex items-center justify-center text-neutral-500 text-sm">Photo</div>
            <div class="flex gap-2">
              <button class="tab-btn border rounded px-3 py-1.5 text-sm" data-tab="overview" aria-selected="true">Overview</button>
              <button class="tab-btn border rounded px-3 py-1.5 text-sm" data-tab="menu">Menu</button>
              <button class="tab-btn border rounded px-3 py-1.5 text-sm" data-tab="info">Info</button>
              <button class="tab-btn border rounded px-3 py-1.5 text-sm" data-tab="map">Map</button>
              <button class="tab-btn border rounded px-3 py-1.5 text-sm" data-tab="reviews">Reviews</button>
            </div>
            <div id="tab-overview" class="text-sm text-neutral-700 leading-6"></div>
            <div id="tab-menu" class="hidden">
              <div class="text-sm" id="menuContent"></div>
            </div>
            <div id="tab-info" class="hidden text-sm">
              <div class="grid grid-cols-2 gap-3">
                <div><div class="font-semibold">Address</div><div id="infoAddress" class="text-neutral-700"></div></div>
                <div><div class="font-semibold">Phone</div><div id="infoPhone" class="text-neutral-700"></div></div>
                <div><div class="font-semibold">Hours</div><div id="infoHours" class="text-neutral-700"></div></div>
                <div><div class="font-semibold">Dress</div><div id="infoDress" class="text-neutral-700"></div></div>
                <div><div class="font-semibold">Parking</div><div id="infoParking" class="text-neutral-700"></div></div>
                <div><div class="font-semibold">Website</div><div id="infoUrl" class="text-neutral-700 break-all"></div></div>
              </div>
            </div>
            <div id="tab-reviews" class="hidden">
              <div id="reviewList" class="text-sm text-neutral-700 space-y-3"></div>
            </div>
          </div>
          <div class="p-4">
            <iframe id="detailMap" class="w-full h-80 border rounded" loading="lazy" title="Map"></iframe>
          </div>
        </div>
      </div>
    </div>
  </div>

</html>
