<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Live Demo — Restaurant AI Helper</title>
  <meta name="description" content="Live demo of the Restaurant AI Helper answering real questions." />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .panel { box-shadow: 0 8px 30px rgba(0,0,0,.08); }
  </style>
</head>
<body class="min-h-screen bg-neutral-50 text-neutral-900">
  <header class="bg-white border-b">
    <div class="max-w-5xl mx-auto px-4 py-4 flex items-center justify-between">
      <a href="./" class="font-semibold">Restaurant AI Helper</a>
      <a href="./#demo" class="text-sm hover:opacity-70">Back to site</a>
    </div>
  </header>

  <main class="max-w-5xl mx-auto px-4 py-10">
    <div class="md:flex md:items-center md:justify-between gap-6">
      <div>
        <h1 class="text-3xl md:text-4xl font-bold">Live Demo</h1>
        <p class="mt-2 text-neutral-600">
          Ask about hours, address/parking, dietary options, or start a reservation request.
        </p>
      </div>
      <div class="mt-6 md:mt-0 text-sm">
        <span class="inline-block px-3 py-1 rounded-full bg-emerald-100 text-emerald-800">Live</span>
      </div>
    </div>

    <!-- Preset questions -->
    <div class="mt-6 grid sm:grid-cols-2 lg:grid-cols-4 gap-3">
      <button class="preset border rounded-md px-3 py-2 bg-white hover:bg-neutral-50 text-left">What are your hours today?</button>
      <button class="preset border rounded-md px-3 py-2 bg-white hover:bg-neutral-50 text-left">I’m gluten-free, what mains can I eat?</button>
      <button class="preset border rounded-md px-3 py-2 bg-white hover:bg-neutral-50 text-left">Where do I park?</button>
      <button class="preset border rounded-md px-3 py-2 bg-white hover:bg-neutral-50 text-left">Book a table for 4 at 7:30</button>
    </div>

    <!-- Chat panel -->
    <section class="mt-8 grid md:grid-cols-2 gap-8 items-start">
      <div class="panel bg-white border rounded-lg overflow-hidden">
        <div class="px-4 py-3 border-b font-semibold">Assistant</div>
        <div id="log" class="h-[420px] overflow-auto px-4 py-4 text-sm"></div>
        <form id="form" class="flex border-t">
          <input id="input" class="flex-1 px-4 py-3 outline-none" placeholder="Type a message…" />
          <button class="px-4 py-3 border-l bg-neutral-50 hover:bg-neutral-100">Send</button>
        </form>
      </div>

      <!-- Notes / Instructions -->
      <aside>
        <div class="panel bg-white border rounded-lg p-5">
          <div class="font-semibold">What to try</div>
          <ul class="mt-3 text-sm text-neutral-700 space-y-2 list-disc list-inside">
            <li>“Are you open Friday?”</li>
            <li>“I’m vegetarian — suggestions?”</li>
            <li>“Do you have a dress code?”</li>
            <li>“Reservation for 6 tomorrow at 8pm”</li>
          </ul>
          <div class="mt-5 text-xs text-neutral-500">
            Demo answers are grounded in sample data. Allergy questions use conservative language and suggest confirming with staff.
          </div>
        </div>
      </aside>
    </section>
  </main>

  <footer class="mt-16 border-t bg-white">
    <div class="max-w-5xl mx-auto px-4 py-8 text-sm text-neutral-500 flex items-center justify-between">
      <span id="year"></span>
      <a href="./" class="hover:opacity-70">Home</a>
    </div>
  </footer>

  <!-- Demo chat script (uses your live API) -->
  <script>
  (function(){
    const API = "https://restaurant-ai-landing.onrender.com"; // your live API

    const log = document.getElementById('log');
    const form = document.getElementById('form');
    const input = document.getElementById('input');

    function say(role, text){
      const row = document.createElement('div');
      row.className = 'mb-2';
      row.innerHTML = role === 'you'
        ? `<div class="text-right"><span class="inline-block rounded-md bg-neutral-900 text-white px-3 py-2">${escapeHtml(text)}</span></div>`
        : `<div class="text-left"><span class="inline-block rounded-md bg-neutral-100 px-3 py-2">${escapeHtml(text)}</span></div>`;
      log.appendChild(row);
      log.scrollTop = log.scrollHeight;
    }
    function escapeHtml(s){ return s.replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }

    async function ask(q){
      if(!q.trim()) return;
      input.value=''; say('you', q); say('ai','…');
      try{
        const r = await fetch(API + '/chat/query', {
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify({ message: q })
        });
        const j = await r.json();
        log.lastChild.innerHTML = `<div class="text-left"><span class="inline-block rounded-md bg-neutral-100 px-3 py-2">${escapeHtml(j.reply || 'Sorry, something went wrong.')}</span></div>`;
      }catch(err){
        log.lastChild.innerHTML = `<div class="text-left"><span class="inline-block rounded-md bg-red-50 text-red-700 px-3 py-2">Can’t reach the demo API right now.</span></div>`;
      }
    }

    document.querySelectorAll('.preset').forEach(btn => {
      btn.addEventListener('click', () => ask(btn.textContent.trim()));
    });

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      ask(input.value);
    });

    // Greet
    say('ai', 'Hi! Ask me about hours, parking, dietary options, or reservations.');
  })();
  </script>

  <script>
    document.getElementById('year').textContent = `© ${new Date().getFullYear()} Restaurant AI Helper`;
  </script>
</body>
</html>
